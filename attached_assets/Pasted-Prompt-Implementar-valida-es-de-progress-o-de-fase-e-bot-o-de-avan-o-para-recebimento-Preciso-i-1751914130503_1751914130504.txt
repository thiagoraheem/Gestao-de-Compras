Prompt: Implementar validações de progressão de fase e botão de avanço para recebimento

Preciso implementar duas novas regras de negócio críticas no sistema de compras:

1. Validação de Progressão: Cotação → Aprovação A2

Cards na fase "Cotação" só podem ser movidos para "Aprovação A2" se TODAS as condições forem atendidas:
Pelo menos uma cotação de fornecedor foi recebida e registrada no sistema
As cotações foram comparadas (análise de preços, prazos e condições)
Um fornecedor vencedor foi selecionado e marcado como escolhido
O processo de análise de RFQ foi concluído com justificativa da escolha
2. Botão "Avançar para Recebimento" na fase Pedido de Compra

Adicionar botão "Avançar para Recebimento" nas seguintes locais:
No card do Kanban quando estiver na fase "Pedido de Compra"
Na tela de edição/visualização da fase "Pedido de Compra" (PurchaseOrderPhase)
O botão deve mover automaticamente o card para a fase "Recebimento"
Incluir confirmação antes da movimentação
Registrar data e usuário responsável pela movimentação
3. Implementações Técnicas Necessárias:

No Frontend:

Modificar KanbanBoard.tsx para verificar se cotação está completa antes de permitir drag/drop de "Cotação" para "Aprovação A2"
Atualizar PurchaseCard.tsx para mostrar feedback visual quando cotação não estiver pronta
Adicionar botão "Avançar para Recebimento" em PurchaseCard.tsx para cards na fase "Pedido de Compra"
Modificar PurchaseOrderPhase.tsx para incluir botão de avanço
Implementar validação visual: cards em "Cotação" devem mostrar status de "Cotação Incompleta" ou "Pronto para Aprovação"
No Backend:

Modificar rota PATCH /api/purchase-requests/:id/update-phase para:
Validar se cotação está completa antes de permitir movimentação para "Aprovação A2"
Verificar se existe fornecedor escolhido (chosenSupplierId preenchido)
Confirmar que processo de análise foi concluído
Criar nova rota POST /api/purchase-requests/:id/advance-to-receipt para:
Mover da fase "Pedido de Compra" para "Recebimento"
Registrar usuário e data da movimentação
Criar entrada no histórico de movimentações
4. Validações de Segurança:

Verificar no backend se cotação foi realmente finalizada
Validar se usuário tem permissão para mover para recebimento
Impedir movimentações via API que não atendam aos critérios
Manter logs de todas as tentativas de movimentação
5. Feedback Visual para o Usuário:

Cards em "Cotação" sem fornecedor escolhido devem ter visual diferenciado
Mostrar tooltip explicativo quando movimentação for bloqueada
Indicador visual no card mostrando status da cotação (Em Andamento/Pronto)
Mensagens claras sobre o que está faltando para completar o processo
6. Estados dos Cards:

Card em "Cotação" com cotações pendentes: visual de "aguardando"
Card em "Cotação" com análise incompleta: visual de "em análise"
Card em "Cotação" pronto para A2: visual de "aprovado para avanço"
Card em "Pedido de Compra": mostrar botão "Avançar para Recebimento"
O sistema deve manter a fluidez do processo para casos válidos enquanto bloqueia adequadamente progressões inválidas, sempre fornecendo feedback claro sobre os motivos das restrições.